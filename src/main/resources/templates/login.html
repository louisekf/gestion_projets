<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CartoRecherche ‚Äî Cartographie des les projets de recherche</title>
    <link rel="stylesheet" th:href="@{/css/main.css}"/>
</head>
<body>
<div class="auth-page">

    <!-- LEFT PANEL -->
    <div class="auth-left">
        <div class="auth-brand">
            <div class="auth-brand-icon">üìä</div>
            <div>
                <div class="auth-brand-name">CartoRecherche</div>
                <div class="auth-tagline">Cartographie des les projets de recherche</div>
            </div>
        </div>

        <h2 class="auth-headline">
            Cartographiez<br/>
            <em>les projets de recherche</em><br/>
            √† l'√©chelle nationale
        </h2>
        <p class="auth-desc">
            Une plateforme nationale pour cartographier, suivre et analyser
            vos les projets de recherche scientifique sur le territoire.
        </p>

        <div class="auth-features">
            <div class="auth-feature">
                <div class="auth-feature-icon">üîí</div>
                Authentification s√©curis√©e OAuth 2.0
            </div>
            <div class="auth-feature">
                <div class="auth-feature-icon">üìä</div>
                Tableaux de bord et statistiques avanc√©es
            </div>
            <div class="auth-feature">
                <div class="auth-feature-icon">üë•</div>
                Gestion des r√¥les et participants
            </div>
            <div class="auth-feature">
                <div class="auth-feature-icon">üì§</div>
                Import CSV en masse
            </div>
        </div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="auth-right">
        <div class="auth-form-wrap fade-in">

            <h1 class="auth-title">Connexion</h1>
            <p class="auth-subtitle">Acc√©dez √† votre espace de gestion</p>

            <!-- Error message -->
            <div th:if="${param.error}" class="alert alert-danger">
                <span class="alert-icon">‚ùå</span>
                <span>Email ou mot de passe incorrect.</span>
            </div>

            <div th:if="${param.logout}" class="alert alert-success">
                <span class="alert-icon">‚úÖ</span>
                <span>Vous avez √©t√© d√©connect√© avec succ√®s.</span>
            </div>

            <!-- Login form -->
            <form th:action="@{/perform_login}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

                <div class="form-group">
                    <label class="form-label" for="email">Adresse email</label>
                    <input type="email" id="email" name="email"
                           class="form-control"
                           placeholder="vous@exemple.com"
                           autocomplete="email" required/>
                </div>

                <div class="form-group">
                    <label class="form-label" for="password">Mot de passe</label>
                    <input type="password" id="password" name="password"
                           class="form-control"
                           placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                           autocomplete="current-password" required/>
                </div>

                <button type="submit" class="btn btn-primary btn-lg w-100">
                    Se connecter ‚Üí
                </button>
            </form>

            <div class="auth-divider"><span>ou continuer avec</span></div>

            <!-- Google OAuth -->
            <a th:href="@{/oauth2/authorization/google}" class="oauth-btn">
                <svg width="18" height="18" viewBox="0 0 18 18">
                    <path d="M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 0 0 2.38-5.88c0-.57-.05-.66-.15-1.18z" fill="#4285F4"/>
                    <path d="M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2.01c-.72.48-1.63.84-2.7.84-2.1 0-3.87-1.42-4.5-3.32H1.8v2.07A8 8 0 0 0 8.98 17z" fill="#34A853"/>
                    <path d="M4.48 10.57A4.82 4.82 0 0 1 4.23 9c0-.55.1-1.08.25-1.57V5.36H1.8A8 8 0 0 0 .98 9c0 1.29.31 2.51.82 3.64l2.68-2.07z" fill="#FBBC05"/>
                    <path d="M8.98 3.57c1.18 0 2.24.41 3.08 1.2l2.3-2.3C12.95.9 11.14 0 8.98 0A8 8 0 0 0 1.8 4.36l2.68 2.07c.63-1.9 2.4-3.32 4.5-3.32z" fill="#EA4335"/>
                </svg>
                Continuer avec Google
            </a>

            <p class="text-center mt-4" style="font-size:13px;color:var(--text-muted)">
                Pas encore de compte ?
                <a th:href="@{/register}" style="color:var(--primary);font-weight:500">Cr√©er un compte</a>
            </p>

        </div>
    </div>

</div>
<script th:src="@{/js/main.js}"></script>
</body>
</html>
